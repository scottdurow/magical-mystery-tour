{"swagger":"2.0","info":{"title":"Contoso Real Estate Stripe API - OpenAPI 3.0","description":"This is the Stripe integration server for Contoso Real Estate company.","version":"1.0.0","contact":{}},"host":"@environmentVariables(\"contoso_PaymentsApiHost\")","basePath":"/@environmentVariables(\"contoso_PaymentsApiBaseUrl\")","schemes":["https"],"consumes":[],"produces":[],"paths":{"/stripe/checkout":{"post":{"tags":["stripe"],"summary":"Create Stripe checkout session","description":"Create Stripe checkout session","operationId":"CreateCheckoutSession","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","description":"Checkout session object to be created","required":true,"schema":{"$ref":"#/definitions/CheckoutRequest"}}],"responses":{"200":{"description":"OK - Returns the session URL","schema":{"$ref":"#/definitions/CheckoutSession"}},"400":{"description":"Bad Request - Invalid request","schema":{"$ref":"#/definitions/Error"}},"500":{"description":"Internal Server Error - Something went wrong","schema":{"$ref":"#/definitions/Error"}}},"x-ms-openai-data":{"openai-enabled":false,"operations":[{"operationId":"createCheckoutSession","x-ms-require-user-confirmation":true}]}}},"/stripe/webhook":{"post":{"tags":["stripe"],"summary":"Stripe webhook endpoint","description":"Stripe webhook endpoint","operationId":"StripeWebhook","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"OK - Webhook event processed successfully","schema":{"$ref":"#/definitions/Message"}},"400":{"description":"Bad Request - Invalid request","schema":{"$ref":"#/definitions/Error"}},"500":{"description":"Internal Server Error - Something went wrong","schema":{"$ref":"#/definitions/Error"}}}}}},"definitions":{"CheckoutRequest":{"type":"object","required":["ClientReferenceNumber","CustomerNumber","ProductName","Description","Amount","Currency","CreatedAt","ExpiryRedirectUrl","SuccessUrl","CancelUrl"],"properties":{"ClientReferenceNumber":{"type":"string","description":"Client Reference Number","example":12345},"CustomerNumber":{"type":"string","description":"Customer Number","example":12345},"CustomerEmail":{"type":"string","description":"Email address to prepopulate the customer with","example":"email@contoso.com"},"ProductName":{"type":"string","description":"Product name","example":"Big house in the city"},"Description":{"type":"string","description":"Product Description","example":"Big house in the city"},"Amount":{"type":"number","description":"Amount of the payment, in cents","example":100},"Currency":{"type":"string","description":"Currency of the payment","example":"usd"},"CreatedAt":{"type":"string","format":"date-time","description":"Timestamp of when the session was created","example":"2020-01-01T00:00:00Z"},"ExpiryRedirectUrl":{"type":"string","description":"Url to redirect on expiry"},"SuccessUrl":{"type":"string","description":"Url to redirect to on success"},"CancelUrl":{"type":"string","description":"Url to redirect to on cancel"}}},"CheckoutSession":{"type":"object","required":["sessionUrl","sessionExpiry"],"properties":{"sessionUrl":{"type":"string","description":"The URL of the checkout session","example":"https://pay.here.com"},"sessionExpiry":{"type":"string","format":"date-time","description":"Timestamp of when to expire the checkout","example":"2020-01-01T00:00:00Z"}}},"Message":{"type":"object","required":["message"],"properties":{"message":{"type":"string","description":"The status message","example":"Operation successful"}}},"Error":{"type":"object","required":["error"],"properties":{"error":{"type":"string","description":"error message","example":"A detailed error message"}}}},"parameters":{},"responses":{},"securityDefinitions":{"oauth2-auth":{"type":"oauth2","flow":"accessCode","authorizationUrl":"https://login.microsoftonline.com/common/oauth2/authorize","tokenUrl":"https://login.windows.net/common/oauth2/authorize","scopes":{"@environmentVariables(\"contoso_PaymentsApiScope\")":"@environmentVariables(\"contoso_PaymentsApiScope\")"}},"oAuthClientCredentials":{"type":"oauth2","flow":"application","tokenUrl":"https://login.windows.net/common/oauth2/authorize","scopes":{"@environmentVariables(\"contoso_PaymentsApiScope\")":"@environmentVariables(\"contoso_PaymentsApiScope\")"}},"certOauth":{"type":"oauth2","flow":"application","tokenUrl":"https://login.windows.net/common/oauth2/authorize","scopes":{"@environmentVariables(\"contoso_PaymentsApiScope\")":"@environmentVariables(\"contoso_PaymentsApiScope\")"}}},"security":[{"oauth2-auth":["@environmentVariables(\"contoso_PaymentsApiScope\")"]},{"oAuthClientCredentials":["@environmentVariables(\"contoso_PaymentsApiScope\")"]},{"certOauth":["@environmentVariables(\"contoso_PaymentsApiScope\")"]}],"tags":[{"name":"stripe","description":"Related to Stripe integrations"}]}